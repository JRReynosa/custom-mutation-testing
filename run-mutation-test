#! /usr/bin/env bash

project_dir=$1 
results=${project_dir}/pitReports/mutations.csv

# run PIT test for given project
cp build.xml ${project_dir}/
cd ${project_dir}
ant pit
cd - 

# add column names to the raw PIT output
sed -i '1ifilename,class,mutator,method_name,line_number,status,killing_test' ${results}

# collapse PIT output into useful format
./collapse-mutation-output ${results} ${project_dir}/pitReports/collapsed.csv

echo Done 
